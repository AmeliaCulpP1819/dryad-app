<h1 class="o-heading__level1">Manage Users</h1>

<%= render partial: 'admin_head', locals: { stats: @stats} %>

<div class="o-admin-container">
  <div class="o-admin-left">
    <h2>Filters</h2>
    <%= render partial: 'tenant_facet', locals: { facets: @tenant_facets } %>
  </div>
  <div class="o-admin-right">
    <h2>User Administration</h2>
    <!-- table and paging here -->
    <%= render partial: 'stash_engine/users/admin_table', locals: { users: @users } %>
    <div class="c-space-paginator">
      <%= paginate @users, params: {page_size: @page_size} %>
    </div>
  </div>
</div>

<!-- javascript for the facet open/close -->
<script>

  // set menus hidden if they are in hidden state of pointy arrow
  $( document ).ready(function() {
    $( ".js-title-toggle" ).each(function( index ) {
      if($(this).hasClass( "c-facet-title--closed" )){
        $(this).next('.js-hideshow').hide();
      }
    });
  });

  // add events to toggle and prevent default of toggle click
  $( ".js-title-toggle" ).click(function(event) {
    toggleMenu($(this));
  });
  $( ".js-title-toggle a").click(function(event) {
    event.preventDefault();
  });

  // toggle the menu open and closed
  function toggleMenu(t){
    var el = t.next('.js-hideshow');
    if(el.is(':visible')){
      el.slideUp();
      t.removeClass('c-facet-title--open');
      t.addClass('c-facet-title--closed');
    }else{
      el.slideDown();
      t.addClass('c-facet-title--open');
      t.removeClass('c-facet-title--closed');
    }
  }
</script>