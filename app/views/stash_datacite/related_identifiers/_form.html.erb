<%# the local variable 'related_identifier' should be passed in to this partial when there are multiple per page %>
<% form_id = unique_form_id(related_identifier) %>
<%= form_for(related_identifier, url: path, remote: true, authenticity_token: true, html: { id: form_id }) do |f| %>
  <%#= render "datacite/shared/error_messages", :target => @related_identifier %>
  <table>
    <tr>
        <td></td>
        <td><%= f.label :relation_type_id, "Relationship" %>&nbsp;&nbsp;&nbsp;</td>
        <td><%= f.label :related_identifier_type_id, "ID Type" %>&nbsp;&nbsp;&nbsp;</td>
        <td><%= f.label :related_identifier, "Identifier" %>&nbsp;&nbsp;&nbsp;</td>
        <td></td>
        <td></td>
    </tr>
    <tr>
      <td>This Dataset&nbsp;</td>
      <td><%= f.select(:relation_type_id, StashDatacite::RelationType.all.map{|r| [r.relation_type, r.id]}, {prompt: "select relationship"}, {class: "relation_type" , style: "width:200px"}) %>&nbsp;&nbsp;&nbsp;</td>
      <td><%= f.select(:related_identifier_type_id, StashDatacite::RelatedIdentifierType.all.map{|r| [r.related_identifier_type, r.id ]}, {prompt: "identifier_type"}, {class: "related_identifier_type" , style: "width:200px"}) %>&nbsp;&nbsp;&nbsp;</td>
      <td><%= f.text_field :related_identifier, size: 40, class: "related_identifier"  %>&nbsp;&nbsp;&nbsp;</td>
      <td><%= link_to 'remove', stash_datacite.related_identifiers_delete_path(related_identifier.id || 'new'), method: :delete, remote: true, data: { confirm: 'Are you sure?' }, class: 'remove_record' %></td>
    </tr>
    <%= f.hidden_field :resource_id %>
    <%= f.hidden_field :id %>
    <%= hidden_field_tag(:form_id, form_id) %>
  </table>
<% end %>