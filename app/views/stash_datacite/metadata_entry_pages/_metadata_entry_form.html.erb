<div>
  <p><h2>Describe your dataset</h2>
  * required fields</p>
  <div class="success_top">
    <p>Changes Autosaved at <%= DateTime.now.in_time_zone%></p>
  </div>
</div>

<div id="accordion">
  <h3><strong>Basic Information</strong></h3>
  <div>
    <%= render partial: "stash_datacite/resource_types/form", locals: { resource_type: @resource_type } %><br/>
    <%= render partial: "stash_datacite/titles/form", locals: { title: @title } %><br/>

    <strong><%= label_tag "Author(s)" %></strong>
    <div class="authors_form">
    <% if @creators.exists? %>
      <% @creators.each do |creator| %>
        <%= render partial: "stash_datacite/creators/update", locals: { creator: creator } %>
      <% end %>
    <% else %>
        <%= render partial: "stash_datacite/creators/form", locals: { creator: @creator } %>
    <% end %>
    </div>
    <%= link_to "Add Author", stash_datacite.creators_new_path( resource_id: @resource.id ), remote: :true %>
    <% unless current_user.orcid == true %>
      <%= link_to "add myself with my Orcid ID", "/stash/auth/orcid?resource_id=#{@resource.id}&current_user_id=#{current_user.id}", class: "add_my_Orcid_ID", style: "display:inline;" %>
    <% end %>
    <br/>
    <br/>

    <strong><%= label_tag :description, "Abstract" %></strong><br/>
    <%= render partial: "stash_datacite/descriptions/form", locals: { description: @abstract,  description_type: :abstract }  %>
  </div>

  <h3><strong>Data Description (Optional)</strong></h3>
  <div>
    <strong><%= label_tag "Funding" %><br/></strong>
    <div class="contributors_form">
    <% if @contributors.exists? %>
      <% @contributors.each do |contributor| %>
        <%= render partial: "stash_datacite/contributors/update", locals: { contributor: contributor } %>
      <% end %>
    <% else %>
        <%= render partial: "stash_datacite/contributors/form", locals: { contributor: @contributor } %>
    <% end %>
    </div>
    <%= link_to "add funder", stash_datacite.contributors_new_path( resource_id: @resource.id ), remote: :true %><br/>
    <br/>

    <% if @subjects.empty? %>
    <%= render partial: "stash_datacite/subjects/form", locals: { subject: @subject, resource_id: @resource.id } %><br/>
    <% else %>
    <%= render partial: "stash_datacite/subjects/form", locals: { resource_id: @resource.id } %><br/>
    <% end %>

    <strong><%= label_tag :description, "Methods" %></strong>&nbsp;&nbsp;How was this dataset collected? How has it been processed?<br/>
    <%= render partial: "stash_datacite/descriptions/form", locals: { description: @methods, description_type: :methods } %><br/>

    <strong><%= label_tag :description, "Usage Notes" %></strong>&nbsp;&nbsp;What else would someone need to know to use this dataset?<br/>
    <%= render partial: "stash_datacite/descriptions/form", locals: { description: @usage_notes, description_type: :usage_notes } %><br/>

    <strong><%= label_tag :related_identifier, "Related work(s)" %></strong> articles, other datasets: e.g., This dataset is cited by DOI 10.1000/182.
    <div class="related_identifiers_form">
    <% if @related_identifiers.exists? %>
      <% @related_identifiers.each do |related_identifier| %>
        <%= render partial: "stash_datacite/related_identifiers/update", locals: { related_identifier: related_identifier } %>
      <% end %>
    <% else %>
      <%= render partial: "stash_datacite/related_identifiers/form", locals: { related_identifier: @related_identifier } %>
    <% end %>
    </div>
    <%= link_to "add related work", stash_datacite.related_identifiers_new_path( resource_id: @resource.id ), remote: :true %><br/>
  </div>

  <h3 id="location_section"><strong>Location Information (optional)</strong></h3>
  <div>
    <%= render partial: "stash_datacite/shared/map" %>
    <strong><%= label_tag "Add a point or rectangular area with lat/long coordinates" %></strong><br/>
    <div style="float:left"><%= link_to(image_tag("stash_datacite/geo_point.png", size: "30x30", alt: "Point", id: "geo_point"), '#')  %><%= link_to(image_tag("stash_datacite/geo_box.png", size: "30x30", alt: "Box", id: "geo_box"), '#') %>&nbsp;&nbsp;</div>
    <%= render partial: "stash_datacite/geolocation_points/form", locals: { geolocation_point: @geolocation_point } %>
    <%= render partial: "stash_datacite/geolocation_boxes/form", locals: { geolocation_box: @geolocation_box } %>
    <br/>
    <div class="locations_added">
      <strong>Locations Added</strong>
      <%= render partial: "stash_datacite/shared/locations" %>
    </div>
  </div>
</div>
<br/>