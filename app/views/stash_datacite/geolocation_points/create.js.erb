$('div.geolocation_points').replaceWith('<%= j render partial: "stash_datacite/geolocation_points/index", locals: { geolocation_points: @geolocation_points } %>')
// map.remove();
// $(document).ready(function() {
//   var lat = parseFloat($('#geo_lat_point').val());
//   var lng = parseFloat($('#geo_lng_point').val());

//   var mapLayer = MQ.mapLayer(),
//       map;

//   map = L.map('map', {
//       layers: mapLayer,
//       center: [lat, lng],
//       zoom: 12
//   });
//   L.marker([lat, lng]).addTo(map);

//   // Initialize the FeatureGroup to store editable layers
//       var drawnItems = new L.FeatureGroup();
//       map.addLayer(drawnItems);

//     // Initialize the draw control and pass it the FeatureGroup of editable layers
//       var drawControl = new L.Control.Draw({
//           position: 'topright',
//           draw: {
//             polyline : false,
//             polygon : false,
//             circle : false,
//           },
//           edit: {
//               featureGroup: drawnItems
//           }
//       });
//       map.addControl(drawControl);

//     // listen to the draw created event
//       map.on('draw:created', function (e) {
//         var type = e.layerType,
//             layer = e.layer;
//       drawnItems.addLayer(layer);

//         var resource_id = $.urlParam('resource_id');
//         var result = getShapes(drawnItems);
//         var shape = result.shape;
//         var coordinates = result.coordinates;

//         if (shape == "rectangle") {
//           //obtain bounding box from the shape coordinates (for rectangle) of map
//           var geoJsonData = {
//                             "type": "Feature",
//                             "properties": {},
//                             "geometry": {
//                               "type": "Polygon",
//                               "coordinates": [ coordinates ]
//                             }
//                           };
//           var geoJsonLayer = L.geoJson(geoJsonData);
//           var bounding_box_sw_lat = geoJsonLayer.getBounds().getSouthWest().lat;
//           var bounding_box_sw_lng = geoJsonLayer.getBounds().getSouthWest().lng;
//           var bounding_box_ne_lat = geoJsonLayer.getBounds().getNorthEast().lat;
//           var bounding_box_ne_lng = geoJsonLayer.getBounds().getNorthEast().lng;
//           $.ajax({
//             type: "POST",
//             url: "/stash_datacite/geolocation_boxes/map_coordinates",
//             data: { 'sw_latitude' : bounding_box_sw_lat, 'sw_longitude' : bounding_box_sw_lng,
//                     'ne_latitude' : bounding_box_ne_lat, 'ne_longitude' : bounding_box_ne_lng,
//                     'resource_id' : resource_id }
//           });
//         }

//         if (shape == "marker") {
//           //obtain latlng coordinates from the shape marker of map
//           var result = getShapes(drawnItems);
//           var shape = result.shape;
//           var coordinates = result.coordinates.toString().split(",");
//           $.ajax({
//             type: "POST",
//             url: "/stash_datacite/geolocation_points/map_coordinates",
//             data: { 'latitude' : coordinates[0], 'longitude' : coordinates[1],
//                     'resource_id' : resource_id }
//           });
//         }
//       });

//       var getShapes = function(drawnItems) {
//         var lng, lat, coordinates = [], shape = "" ;

//         drawnItems.eachLayer(function(layer) {
//             // Note: Rectangle extends Polygon. Polygon extends Polyline.
//             // Therefore, all of them are instances of Polyline
//             if (layer instanceof L.Polyline) {
//               coordinates = [];
//               shape = "rectangle";
//               latlngs = layer.getLatLngs();
//               for (var i = 0; i < latlngs.length; i++) {
//                   coordinates.push([latlngs[i].lng, latlngs[i].lat])
//               }
//             }

//             if (layer instanceof L.Marker) {
//               coordinates = [];
//               shape = "marker";
//               coordinates.push([layer.getLatLng().lat, layer.getLatLng().lng]);
//             }
//         });
//         return {
//           coordinates: coordinates,
//           shape : shape
//         };
//       };

// console.log("Bounding Box: " + geoJsonLayer.getBounds().toBBoxString());
    // listen to the draw edited event
        // map.on('draw:edited', function () {
        //     // Update db to save latest changes.
        // });

    // listen to the draw deleted event
        // map.on('draw:deleted', function () {
        //     // Update db to save latest changes.
        // });
});