<%# the local variable 'geolocation_box' should be passed in to this partial when there are multiple per page %>
<div id="geolocation_box" style="flex: 1 0 auto">
  <%= form_for(geolocation_box, url: stash_datacite.geolocation_boxes_create_path, remote: true, authenticity_token: true, html: {id: "geolocation_box_new_form", class: 'c-location__box-inputs'}) do |f| %>
    <%#= render "datacite/shared/error_messages", :target => @geolocation_box %>
    <div class="c-location__coordinates" role="group" aria-labelledby="c-location__legend1">
      <div class="c-location__legend" id="c-location__legend1"><abbr title="Southwest">SW</abbr></div>
      <%= f.text_field :sw_latitude, class: 'c-location__input', id: "geo_sw_lat_point" %>
      <%= f.text_field :sw_longitude, class: 'c-location__input', id: "geo_sw_lng_point" %>&nbsp;,&nbsp;
    </div>
    <div class="c-location__coordinates" role="group" aria-labelledby="c-location__legend2">
      <div class="c-location__legend" id="c-location__legend2"><abbr title="Northeast">NE</abbr></div>
      <%= f.text_field :ne_latitude, class: 'c-location__input', id: "geo_ne_lat_point" %>
      <%= f.text_field :ne_longitude, class: 'c-location__input', id: "geo_ne_lng_point" %>
      <%= f.hidden_field :resource_id %>
      <%= f.submit "Add", id: "add_geo_point", class: 'c-location__add-button o-button__plain-text2' %>
    </div>
  <% end %>
</div>

<script type="text/javascript">
$(document).ready(function() {
  $("#geolocation_box").hide();
  $("#geo_box").on('click', function(e){
    $("#geolocation_box").show();
    $("#geolocation_point").hide();
  });

  // latitiude longitude validation for Geolocation Box
  $("#geo_sw_lat_point").on('blur', function(e){
  var lat = $(this).val();
  var latReg = /^(\+|-)?(?:90(?:(?:\.0{1,6})?)|(?:[0-9]|[1-8][0-9])(?:(?:\.[0-9]{1,6})?))$/;
    if(lat == "") {
      return false;
    }
    else if (!latReg.test(lat)) {
      alert("Please enter valid latitude value");
      $('#geo_sw_lat_point').val('');
    }
  });

  $("#geo_ne_lat_point").on('blur', function(e){
  var lat = $(this).val();
  var latReg = /^(\+|-)?(?:90(?:(?:\.0{1,6})?)|(?:[0-9]|[1-8][0-9])(?:(?:\.[0-9]{1,6})?))$/;
    if(lat == "") {
      return false;
    }
    else if (!latReg.test(lat)) {
      alert("Please enter valid latitude value");
      $('#geo_ne_lat_point').val('');
    }
  });

  $("#geo_sw_lng_point").on('blur', function(e){
  var lng = $(this).val();
  var lngReg = /^(\+|-)?(?:180(?:(?:\.0{1,6})?)|(?:[0-9]|[1-9][0-9]|1[0-7][0-9])(?:(?:\.[0-9]{1,6})?))$/;
    if(lng == "") {
      return false;
    }
    else if(!lngReg.test(lng)) {
      alert("Please enter valid longitude value")
      $('#geo_sw_lng_point').val('');
    }
  });

  $("#geo_ne_lng_point").on('blur', function(e){
  var lng = $(this).val();
  var lngReg = /^(\+|-)?(?:180(?:(?:\.0{1,6})?)|(?:[0-9]|[1-9][0-9]|1[0-7][0-9])(?:(?:\.[0-9]{1,6})?))$/;
    if(lng == "") {
      return false;
    }
    else if(!lngReg.test(lng)) {
      alert("Please enter valid longitude value")
      $('#geo_ne_lng_point').val('');
    }
  });

});
</script>